FROM node:16-bullseye

ENV PL_SITE_DIR=/site

WORKDIR /padloc

COPY packages/site/package*.json ./packages/site/

RUN npm install

COPY packages/site/src ./packages/site/src
COPY packages/site/gulpfile.js ./packages/site/

WORKDIR /padloc/packages/site

RUN npm run build

RUN cp -r /padloc/packages/site/dist/* /site
